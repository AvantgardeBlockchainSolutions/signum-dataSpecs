# Searching locations within an area

## Query Name

- `Area`

## Query Description

This query returns a list of location ids for any attribute around an area. For instance, a list of cafes around the Boston area. The key attribute in this example would be amenity and the value attribute would be cafes. Also, you can limit the number of samples by including an optional parameter for the list count.  To retrieve information about the max count of the list around the area, it's helpful to use an area count query with this endpoint, e.g. https://api.georacle.io/location/area/count?name=Boston&key=amenity&value=cafe

## Query Parameters

The `Area` query has three required parameters plus an optional fourth.  

1. **searchArea** (string): e.g. "Boston"
2. **keyAttribute** (string): e.g. "amenity"
3. **valueAttribute** (string): e.g. "cafe"
4. **limitCount** (int256): e.g. 5

*Descriptor:*

```json
    {
        "type": "Area",
        "inputs": [{
            "type": "string",
            "name": "searchArea",

            "type": "string",
            "name": "keyAttribute",
            
            "type": "string",
            "name": "valueAttribute",
            
            "type": "int256",
            "name": "limitCount"},
        ],
        "outputs": [
            {
              "name": "idList",
              "type": "string[]",
              "packed":false
            }
        ]
    }
```

## Response Type

The query response will consist of a list of string values in the following format:

- `abi_type`: '(string[])'
- `packed`: false

## Examples

### Cafes in Boston Area

*Query Descriptor:*

```json
{"type":"Area","searchArea":"Boston", "keyAttribute": "amenity", "valueAttribute": "cafe", "limitCount": 5}
```

*queryData:*

- <details><summary>Solidity</summary>

    ```javascript
    abi.encode("Area", abi.encode("Boston","amenity","cafe",5))
    ```

- <details><summary>Python</summary>

    ```python
    queryDataArgs = encode_abi(["string","string","string","int256"], ["Boston","amenity","cafe",5])
    queryData = encode_abi(["string", "bytes"], ["Area", queryDataArgs])
    ```

</details>
</details>

`0x00000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000000441726561000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000140000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000c0000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000050000000000000000000000000000000000000000000000000000000000000006426f73746f6e00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000007616d656e6974790000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000046361666500000000000000000000000000000000000000000000000000000000`

*queryID:*

```s
keccak256(queryData)
```

`0x85494afabfb34d2f5da592bde3b6b8a6fa553eb4cf066146a97c01643a1ce89b`


### Encoding/Decoding

*queryData:*

- <details><summary>Solidity</summary>

    ```javascript
    abi.decode(data, (string[]))
    ```

- <details><summary>Python</summary>

    ```python
    d = bytes.fromhex("0x0000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000500000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000e00000000000000000000000000000000000000000000000000000000000000120000000000000000000000000000000000000000000000000000000000000016000000000000000000000000000000000000000000000000000000000000001a0000000000000000000000000000000000000000000000000000000000000000c5f77414141414166704868570000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c5f7741414141416b776b62440000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c5f7741414141416e7171754f0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c5f774141414141754e3866510000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c5f77414141414139304744630000000000000000000000000000000000000000"[2:])
    locationidList = decode_single('(string[])',d)
    ```

</details>
</details>

A value of (('_wAAAAAfpHhW','_wAAAAAkwkbD','_wAAAAAnqquO','_wAAAAAuN8fQ','_wAAAAA90GDc'),) would be submitted on-chain using the following bytes:

`0x0000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000500000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000e00000000000000000000000000000000000000000000000000000000000000120000000000000000000000000000000000000000000000000000000000000016000000000000000000000000000000000000000000000000000000000000001a0000000000000000000000000000000000000000000000000000000000000000c5f77414141414166704868570000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c5f7741414141416b776b62440000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c5f7741414141416e7171754f0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c5f774141414141754e3866510000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c5f77414141414139304744630000000000000000000000000000000000000000`



## Sources

Use georacle.io, https://api.georacle.io/area, source to get this data.
https://api.georacle.io/location/area?name=Boston&key=amenity&value=cafe&limit=5&api_key={api_key}. You have to include a header with this request. ```Header = {"user-agent": ""}```
